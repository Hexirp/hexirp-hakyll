# design

設計について。

## Store

あなたが行えること。

* あるキーを使って、ある値を格納する。
* あるキーに対応する値を読み込む。
* あるキーに対応する値が存在するかどうか調べる。

取り扱う対象。

* キー ( `StoreKey` )
* 値 ( `StoreValue`, `exists a. (Binary a, Typeable a) => a` )

実装上の工夫

* 読み込みの操作を `Maybe` に包むことで、値が存在するかどうか調べる操作と、値を取り出す操作を一つにする。

## Provider

あなたが行えること。

* 全てのリソースのパスを取得する。
* リソースの直前での実行時での更新日時と現在の実行時での更新日時を取得する。
* リソースの内容を取得する。

取り扱う対象。

* リソースのパス ( `Resource` )
* リソースの直前での実行時での更新日時と現在の実行時での更新日時 ( `MTime` )
* リソースの内容 ( `Body` )

実装上の工夫

* Store を使って、リソースの更新日時を現在の実行を超えて保存する。

## Identifier

あるコンパイル結果を表す。 `identifierPath` フィールドでどのリソースに対応するか示す。

あるリソースが複数の形でコンパイルされることもあり得るので、それらは `identifierVersion` フィールドで区別される。
