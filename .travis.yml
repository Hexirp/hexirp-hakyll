# Choose a OS
os: windows

# Do not choose a language; we provide our own build tools.
language: shell

# Caching so the next build will be fast too.
cache:
  directories:
    - C:\\sr\\

# Use Build Matrix to build multiple stack resolvers.
env:
#- STACK_YAML='stack.yaml'
- STACK_YAML='lts-12.26.yaml'
#- STACK_YAML='lts-13.30.yaml'

before_install:
# Download and unpack the stack executable
- mkdir ,\\
- cd ,\\
- mkdir -p $HOME\\AppData\\Roaming\\local\\bin\\
- export PATH=$HOME\\AppData\\Roaming\\local\\bin\\:$PATH
- travis_retry curl -OL https://get.haskellstack.org/stable/windows-x86_64.zip
- unzip windows-x86_64.zip
- cp stack.exe $HOME\\AppData\\Roaming\\local\\bin\\
- export STACK_ROOT=C:\\sr\\
- cd ..\\

install:
# Build dependencies
- stack --no-terminal --install-ghc test --only-dependencies

script:
# Build the package, its tests, and its docs and run the tests
- stack --no-terminal test --haddock --no-haddock-deps
